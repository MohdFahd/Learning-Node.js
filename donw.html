<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>File Downloader</title>
  </head>
  <body>
    <script>
      const axios = require("axios");
      const fs = require("fs");

      async function downloadMedia(url, outputPath) {
        try {
          const response = await axios({
            method: "GET",
            url: url,
            responseType: "stream",
          });

          // Create a writable stream to save the media
          const fileStream = fs.createWriteStream(outputPath);

          // Pipe the response stream to the file stream
          response.data.pipe(fileStream);

          // Return a promise that resolves when the download is complete
          return new Promise((resolve, reject) => {
            fileStream.on("finish", resolve);
            fileStream.on("error", reject);
          });
        } catch (error) {
          console.error("Error downloading media:", error);
          throw error;
        }
      }

      // Example usage:
      const mediaUrl =
        "https://scontent.cdninstagram.com/v/t66.30100-16/10000000_921815402780856_2430575785579850306_n.mp4?_nc_ht=scontent.cdninstagram.com&_nc_cat=100&_nc_ohc=a8R2ynvrSy0AX9ymITT&edm=APs17CUBAAAA&ccb=7-5&oh=00_AfCtz4nzWhZNus99UfyD0xqmWMA7wTT2Tvvxyg2EcEvUNQ&oe=65F4E041&_nc_sid=10d13b";
      const outputFilePath = "downloaded_media.mp4";

      downloadMedia(mediaUrl, outputFilePath)
        .then(() => {
          console.log("Media downloaded successfully!");
        })
        .catch((error) => {
          console.error("Failed to download media:", error);
        });
    </script>
  </body>
</html>
